<html>
  <head>
    <script src='https://cdn.firebase.com/js/client/1.0.15/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
<style type="text/css">
#banner {
font-size: large;
}
#myval {
font-size: xx-large;
}
</style>
  </head>
  <body>
<div id='banner'>
	my val: <span id='myval' style='{font-size: 64pt;}'></span>
	name:<span id='name'></span>
	val:<span id='val'></span>
</div>
    <script>
var myDataRef = new Firebase('https://crackling-fire-2734.firebaseio.com/');

function getUrlParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) 
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) 
        {
            return sParameterName[1];
        }
    }
} 
var my_val = getUrlParameter('val');
$('#myval').text(my_val);
function handleMessage(snapshot) 
{
	var the_val = snapshot.val();
	var the_name = snapshot.name();
	$('#name').text(the_name);
	$('#val').text(the_val);
	if (the_name == 'winner') {
    		if (the_val == my_val){
			$('body').css('background-color', 'red');
		} else {
			$('body').css('background-color', 'white');
		}
	}
}

myDataRef.on('child_added', function(snapshot) {
	handleMessage(snapshot);
});
myDataRef.on('child_changed', function(snapshot) {
	handleMessage(snapshot);
});
    </script>
  </body>
</html>
